@using VHS.Client.Services
@using VHS.Client.Services.Auth
@inject SystemService SystemService
@inject IStringLocalizer<Shared> Localizer
@inject IAuthorizationClientService AuthorizationService
@inject PermissionService PermissionService

<MudNavMenu Class="sidebar-nav">

	<MudNavLink Href="/" Match="NavLinkMatch.All" Class="sidebar-menu-link">
		<MudIcon Icon="@Icons.Material.Outlined.Home" Size="Size.Small" />
		<MudText Color="Color.Default" Class="sidebar-menu-text">@Localizer["Home"]</MudText>
	</MudNavLink>

	@if (PermissionService.CanAccessPlanningOperations)
	{
		<MudText Color="Color.Default" Class="sidebar-menu-parent" Typo="Typo.subtitle2">
			Planning
		</MudText>

		<MudNavLink Href="/growplans/list" Match="NavLinkMatch.All" Class="sidebar-menu-link">
			<MudIcon Icon="@Icons.Material.Outlined.AllInbox" Size="Size.Small" />
			<MudText Color="Color.Default" Class="sidebar-menu-text">@Localizer["GrowPlans"]</MudText>
		</MudNavLink>
		<MudNavLink Href="/jobplans/list" Match="NavLinkMatch.All" Class="sidebar-menu-link">
			<MudIcon Icon="@Icons.Material.Outlined.Assignment" Size="Size.Small" />
			<MudText Color="Color.Default" Class="sidebar-menu-text">@Localizer["JobPlans"]</MudText>
		</MudNavLink>
		<MudNavLink Href="/batches/list" Match="NavLinkMatch.All" Class="sidebar-menu-link">
			<MudIcon Icon="@Icons.Material.Outlined.Layers" Size="Size.Small" />
			<MudText Color="Color.Default" Class="sidebar-menu-text">@Localizer["Batches"]</MudText>
		</MudNavLink>
		<MudNavLink Href="/jobs/list" Match="NavLinkMatch.All" Class="sidebar-menu-link">
			<MudIcon Icon="@Icons.Material.Outlined.Ballot" Size="Size.Small" />
			<MudText Color="Color.Default" Class="sidebar-menu-text">@Localizer["Jobs"]</MudText>
		</MudNavLink>
		<MudNavLink Href="/results" Match="NavLinkMatch.All" Class="sidebar-menu-link">
			<MudIcon Icon="@Icons.Material.Outlined.ShoppingBasket" Size="Size.Small" />
			<MudText Color="Color.Default" Class="sidebar-menu-text">@Localizer["Results"]</MudText>
		</MudNavLink>
	}
	<MudText Color="Color.Default" Class="sidebar-menu-parent" Typo="Typo.subtitle2">
		Overview
	</MudText>
	<MudNavLink Href="/racks" Match="NavLinkMatch.All" Class="sidebar-menu-link">
		<MudIcon Icon="@Icons.Material.Outlined.Factory" Size="Size.Small" />
		<MudText Color="Color.Default" Class="sidebar-menu-text">@Localizer["Racks"]</MudText>
	</MudNavLink>
	<MudNavLink Href="/rackoccupancy" Match="NavLinkMatch.All" Class="sidebar-menu-link">
		<MudIcon Icon="@Icons.Material.Outlined.Percent" Size="Size.Small" />
		<MudText Color="Color.Default" Class="sidebar-menu-text">@Localizer["RackOccupancy"]</MudText>
	</MudNavLink>
	<MudNavLink Href="/intransit" Match="NavLinkMatch.All" Class="sidebar-menu-link">
		<MudIcon Icon="@Icons.Material.Outlined.ShoppingCartCheckout" Size="Size.Small" />
		<MudText Color="Color.Default" Class="sidebar-menu-text">@Localizer["InTransit"]</MudText>
	</MudNavLink>
	<MudText Color="Color.Default" Class="sidebar-menu-parent" Typo="Typo.subtitle2">
		Dashboards
	</MudText>
	<MudNavLink Href="/dashboard-seeding" Match="NavLinkMatch.All" Class="sidebar-menu-link">
		<MudIcon Icon="@Icons.Material.Outlined.Compost" Size="Size.Small" />
		<MudText Color="Color.Default" Class="sidebar-menu-text">@Localizer["DashboardSeeder"]</MudText>
	</MudNavLink>
	<MudNavLink Href="/dashboard-harvesting" Match="NavLinkMatch.All" Class="sidebar-menu-link">
		<MudIcon Icon="@Icons.Material.Outlined.MacroOff" Size="Size.Small" />
		<MudText Color="Color.Default" Class="sidebar-menu-text">@Localizer["DashboardHarvester"]</MudText>
	</MudNavLink>
	<MudNavLink Href="/dashboard-transplant" Match="NavLinkMatch.All" Class="sidebar-menu-link">
		<MudIcon Icon="@Icons.Material.Outlined.Gradient" Size="Size.Small" />
		<MudText Color="Color.Default" Class="sidebar-menu-text">@Localizer["DashboardTransplanter"]</MudText>
	</MudNavLink>
	<MudNavLink Href="/dashboard-all" Match="NavLinkMatch.All" Class="sidebar-menu-link">
		<MudIcon Icon="@Icons.Material.Outlined.GridOn" Size="Size.Small" />
		<MudText Color="Color.Default" Class="sidebar-menu-text">@Localizer["DashboardAll"]</MudText>
	</MudNavLink>


	@if (PermissionService.CanAccessSystemSettings)
	{
		<MudText Color="Color.Default" Class="sidebar-menu-parent" Typo="Typo.subtitle2">
			System
		</MudText>
		<MudNavLink Href="/system-settings" Match="NavLinkMatch.Prefix" Class="sidebar-menu-link">
			<MudIcon Icon="@Icons.Material.Outlined.Settings" Size="Size.Small" />
			<MudText Color="Color.Default" Class="sidebar-menu-text">@Localizer["SystemSettings"]</MudText>
		</MudNavLink>
		<MudNavLink Href="/opcstats" Match="NavLinkMatch.Prefix" Class="sidebar-menu-link">
			<MudIcon Icon="@Icons.Material.Outlined.SettingsApplications" Size="Size.Small" />
			<MudText Color="Color.Default" Class="sidebar-menu-text">@Localizer["OPCStats"]</MudText>
		</MudNavLink>
	}
</MudNavMenu>

@code {
	protected override async Task OnInitializedAsync()
	{
		await PermissionService.CheckPermissions();
	}
}
