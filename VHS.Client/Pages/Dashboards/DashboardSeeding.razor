@page "/dashboard-seeding"
@inject HubConnection _hubConnection
@inject PageTitleService PageTitleService

<DashboardComponent JobLocationId="@GlobalConstants.JOBLOCATION_SEEDER" @ref="dc" />

@code {
    private DashboardComponent? dc;

    protected override async Task OnInitializedAsync()
    {
        PageTitleService.Title = "";

        await ConnectNotification();
    }

    private async Task ConnectNotification()
    {
        _hubConnection.On<Guid, Guid>("NewTrayAtSeeder", (jobId, trayId) =>
        {
            dc.LoadJobs();
        });

    }

    private async Task ConnectNotificationRefresh()
    {
        _hubConnection.On("RefreshDashboardSeeder",() =>
        {
            dc.LoadJobs();
        });

    }

}
