@page "/dashboard-seeding"
@inject HubConnection _hubConnection
@inject PageTitleService PageTitleService
@implements IDisposable

<DashboardComponent JobLocationId="@GlobalConstants.JOBLOCATION_SEEDER" @ref="dc" />

@code {
    private DashboardComponent? dc;

    protected override async Task OnInitializedAsync()
    {
        PageTitleService.Title = "";
        PageTitleService.BackUrl = "";

        await ConnectNotificationRefresh();
    }

    private async Task ConnectNotificationRefresh()
    {
        _hubConnection.On("RefreshDashboardSeeder",() =>
        {
            dc.LoadJobs();
        });

    }

    public void Dispose()
    {
        if (_hubConnection != null)
        {
            _hubConnection.Remove("RefreshDashboardSeeder");
        }
    }

}
