@page "/dashboard-transplant"
@inject HubConnection _hubConnection
@inject PageTitleService PageTitleService
@implements IDisposable

<DashboardComponent JobLocationId="@GlobalConstants.JOBLOCATION_TRANSPLANTER" @ref="dc" />

@code {
    private DashboardComponent? dc;

    protected override async Task OnInitializedAsync()
    {
        PageTitleService.Title = "";
        PageTitleService.BackUrl = "";

        await ConnectNotification();
    }

    private async Task ConnectNotification()
    {
        _hubConnection.On("RefreshDashboardTransplanter", () =>
           {
               dc.LoadJobs();
           });
    }

    public void Dispose()
    {
        if (_hubConnection != null)
        {
            _hubConnection.Remove("RefreshDashboardTransplanter");
        }
    }
}
